---
layout: post
date: 2017-03-03
title: c语言教程7
categories: blog

---

调试程序的方法与医生看病的道理类似：先问清基本情况，再进行大致的检查，然后分析检查的结果、确定范围，再进行专项检查，再分析检查结果，如此反复，最后确定问题所在并进行治疗、检查疗效。

必须指出的是：用户调试自己的程序时，应对程序的设计(工作)思路非常清楚，知道每一段、每一行程序所应起到(尽管不见得都能实现)的作用，这是基本的前提。若自己对设计都不清楚、甚至不知道每一段、每一行程序应发挥的作用，是谈不上调试程序的。

1) 观察了解程序的“病症”表现

首先是看清情况，程序的任务、程序的预期表现与程序工作的实际表现，大概是什么方面的“病”——对于常见的小“病”，经验丰富的专家不用后续检查就能知道问题所在。经验当然重要，但对于初学者而言，掌握正确的调试思路则更加重要，因为初学者很难通过观察程序而发现问题所在。

2) 弄清程序的主要工作流程

在学习过程中设计的程序一般都不太复杂，从总体算法上总是可以划分为几个大的模块(也可称为步骤，可以是一段程序或一个子程序——函数)：接收用户的要求和任务(读取相应的参数、输入相应的数据)、对数据进行计算和处理、按格式要求输出相应的结果。对于每一个大的模块，又可以分为许多子模块。

3) 进行大致的检查，确定问题存在的模块

检查的任务，就是查看程序的实际工作状态(屏幕输出是否正确、各变量的值是否正确)与预期的设计是否一致，若不一致，则肯定有问题。

对于较长、较复杂的程序，检查时不应从开始一行一行检查，这种方法效率低、不科学，也不易发现问题。正确的方法是：先分大模块检查，确定大模块有无问题，再针对有问题的大模块，检查其内部的工作过程。例如，对于程序3-1，应先检查输入完成时工作是否正确，即让程序运行至“计算与处理”时暂停(从键盘输入一组数据)，查看相应的结果(这段程序的运行目的就是将输入数据存放至数组a中并由num记录数据个数，因此应检查数组a和num的内容)是否正确，若不正确，则至少找到一部分问题。排除输入的故障后，则可让程序运行到“输出”时暂停，检查相应的结果(即数组a中的数据是否按要求排好顺序)。

在检查过程中，用户应根据自己的经验，灵活调整检查策略，提高工作效率，例如可以使用二分法定位故障，也可观察后估计问题位置再进行检查。

4) 检查故障模块，确定问题并解决

对于复杂故障模块内部的运行检查，可以再分子模块(部分)进行分部检查。检查模块的设计是否正确的基本思路是：一步一步运行程序，看程序的运行流程是否如设计期望，看每步程序的运行结果(屏幕输出和相关变量)是否与设计(心算)的一致。例如程序3-1的输入部分，假定未看到问题，则可检查：输入一个数据后，x中的数据是否是输入的数据——若不是，则该条语句肯定有问题，仔细检查应能发现问题；当输入不是结束标志时，则否将数据存入了a[i]、i和计数器num的值是否正确；当输入的是结束标志时，是否如期望的结束输入。
